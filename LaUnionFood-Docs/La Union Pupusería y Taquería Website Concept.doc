# **ğŸŒ La Union: Complete App & Website Specification Document**

## **Executive Summary**
A unified digital platform combining website and mobile app to serve as the complete digital presence for La Union PupuserÃ­a y TaquerÃ­a food truck. This specification defines the *complete* system without adding new features beyond what's already conceptualized, featuring in English and Spanish.

---

## **1. Technology Architecture**

### **Unified Backend System**
```
Frontend Layer:
â”œâ”€â”€ Customer Website (React/Next.js)
â”œâ”€â”€ Mobile App (React Native/Flutter)
â””â”€â”€ Admin Portal (React Dashboard)

Backend Layer:
â”œâ”€â”€ API Gateway (Node.js/Express)
â”œâ”€â”€ Microservices:
â”‚   â”œâ”€â”€ Order Service
â”‚   â”œâ”€â”€ Menu Service
â”‚   â”œâ”€â”€ Location Service
â”‚   â”œâ”€â”€ Loyalty Service
â”‚   â””â”€â”€ Notification Service
â””â”€â”€ Database Layer:
    â”œâ”€â”€ PostgreSQL (Orders, Users, Loyalty)
    â”œâ”€â”€ Redis (Session cache, real-time updates)
    â””â”€â”€ Cloud Storage (Images, static assets)
```

### **Third-Party Integrations**
- **Payment**: Stripe/Square (card processing) + Apple/Google Pay
- **Maps**: Google Maps API (real-time truck location)
- **SMS/Email**: Twilio + SendGrid for notifications
- **Analytics**: Mixpanel/Google Analytics for tracking

---

## **2. Complete Feature Specifications**

### **A. Core User Journeys (Defined & Closed)**

#### **Journey 1: First-Time Order**
```
Homepage â†’ Menu â†’ Add Items (with modifiers) â†’ Checkout â†’ 
Guest Checkout or Account Creation â†’ Payment â†’ 
Confirmation + Status Tracking â†’ Post-Order Loyalty Signup
```

#### **Journey 2: Returning Customer**
```
Login â†’ Menu/Favorites â†’ Quick Re-order â†’ Checkout â†’ 
Loyalty Points Applied â†’ Payment â†’ 
Status Tracking â†’ Points Added to Account
```

#### **Journey 3: Truck Locator**
```
Check Schedule â†’ View Map â†’ Set Notifications â†’ 
Navigate to Truck â†’ Show QR Code at Pickup
```

#### **Journey 4: Admin Operations**
```
Login â†’ View Order Queue â†’ Update Status â†’ 
Manage Menu Items â†’ Update Schedule â†’ View Analytics
```

---

## **3. Detailed Component Specifications**

### **A. Homepage (Fully Specified)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hero Section (100vh)                                    â”‚
â”‚ - Background: Parallax video/photo of food preparation  â”‚
â”‚ - Primary CTA: "ORDER NOW" (links to menu)              â”‚
â”‚ - Secondary CTA: "FIND TRUCK" (links to map)           â”‚
â”‚ - Tertiary: "VIEW MENU" (smooth scroll to menu preview) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Location Widget (Fixed Section)                         â”‚
â”‚ - Live map (static view)                                â”‚
â”‚ - Current address & next departure time                 â”‚
â”‚ - "Notify Me" button                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Menu Preview                                            â”‚
â”‚ - 3-4 featured items with "Add to Order" quick buttons  â”‚
â”‚ - "View Full Menu" button                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Loyalty Teaser                                          â”‚
â”‚ - Progress bar showing "X points to next reward"        â”‚
â”‚ - "Join Now" / "Sign In" buttons                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ About Snippet                                           â”‚
â”‚ - 2-3 sentence story + team photo                       â”‚
â”‚ - "Read Our Story" link                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **B. Menu System (Finalized)**
```
Data Structure:
{
  category: "Pupusas",
  items: [
    {
      id: "pup-001",
      name: "Revuelta Pupusa",
      description: "Cheese, pork, beans",
      price: 3.50,
      image: "url",
      modifiers: [
        {
          type: "extra",
          name: "Extra Curtido",
          price: 0.50
        }
      ],
      tags: ["spicy", "vegetarian", "gluten-free"],
      available: true
    }
  ]
}

UI Components:
- Sticky category navigation
- Filter chips: Vegetarian, Spicy, GF, etc.
- Search bar with autocomplete
- Item cards with hover effects
- Sticky order summary (mobile: bottom sheet)
```

### **C. Checkout Flow (Complete)**
```
Step 1: Order Review
- Editable item list
- Modifiers displayed
- Subtotal calculation

Step 2: Pickup Selection
- Radio: "ASAP" vs "Schedule"
- Date/Time picker for scheduled
- Estimated ready times

Step 3: Customer Info
- Name
- Phone (for notifications)
- Email (optional, for receipt)

Step 4: Payment
- Card form (Stripe Elements)
- Digital wallet buttons
- Cash toggle
- Loyalty code field

Step 5: Confirmation
- Order number
- QR code for pickup
- Status timeline
- "Track Order" button
```

### **D. Loyalty Program (Full Definition)**
```
Points System:
- $1 spent = 10 points
- 500 points = free drink
- 1000 points = free pupusa/taco
- 1500 points = $10 off
- 2500 points = family meal

Referral Program:
- Both parties get 250 points
- Maximum 5 referrals/month

UI Components:
- Dashboard with points balance
- Progress to next reward
- Transaction history
- Referral link generator
```

### **E. Admin Portal (Feature-Complete)**
```
Modules:
1. Order Management
   - Live queue (WebSocket updates)
   - Status toggles: Received â†’ Preparing â†’ Ready â†’ Completed
   - Filter by status/time
   - Order details modal

2. Menu Management
   - Drag-and-drop categories
   - Item CRUD operations
   - Image upload
   - Toggle availability
   - Price updates

3. Schedule Management
   - Weekly calendar view
   - Add/remove locations
   - Set hours
   - Special hours for holidays

4. Analytics Dashboard
   - Daily sales
   - Top items
   - Busiest times
   - Loyalty engagement
   - Export to CSV
```

---

## **4. User Interface Guidelines (Final)**

### **Color Palette (Locked)**
```
Primary:
- Spicy Red: #E63946 (CTAs, alerts)
- Citrus Orange: #F77F00 (accent, highlights)
- Corn Yellow: #FDC500 (discounts, deals)

Neutral:
- Off-white: #F8F8F8 (background)
- Light Grey: #EFEFEF (cards, dividers)
- Charcoal: #333333 (text)

Accent:
- Avocado Green: #2A9D8F (success, loyalty)
```

### **Typography (Final)**
```
Headings: Poppins (600 weight)
- H1: 2.5rem
- H2: 2rem
- H3: 1.5rem

Body: Open Sans (400 weight)
- Primary: 1rem
- Secondary: 0.875rem

Special:
- Menu Items: Poppins (500)
- Prices: Poppins (600)
```

### **Spacing System (8px grid)**
```
Padding/Margin increments:
- xs: 4px
- sm: 8px
- md: 16px
- lg: 24px
- xl: 32px
- xxl: 48px
```

### **Animation Library**
```
- Page transitions: Fade 300ms
- Button hover: Scale 1.05
- Card hover: Elevation + shadow
- Loading: Pulse animation
- Status changes: Slide in/out
```

---

## **5. Data Models (Complete Schema)**

### **Core Tables**
```sql
-- Users table
users(id, email, phone, name, created_at, loyalty_points)

-- Orders table  
orders(id, user_id, status, total, pickup_time, payment_method, created_at)

-- Order items table
order_items(id, order_id, menu_item_id, quantity, special_instructions)

-- Menu items table
menu_items(id, name, description, price, category, image_url, available)

-- Truck locations table
truck_locations(id, address, latitude, longitude, start_time, end_time, day_of_week)

-- Loyalty transactions
loyalty_transactions(id, user_id, points, type, order_id, created_at)
```

---

## **6. API Endpoints (Complete Set)**

### **Public Endpoints**
```
GET    /api/menu              # Get full menu
GET    /api/locations/today   # Today's schedule
GET    /api/locations/current # Current truck location
POST   /api/orders            # Create order
GET    /api/orders/:id/status # Check order status
POST   /api/notifications     # Sign up for truck alerts
```

### **Authenticated Endpoints**
```
GET    /api/user/orders       # User's order history
GET    /api/user/loyalty      # Loyalty points & rewards
POST   /api/user/referral     # Create referral code
PUT    /api/user/profile      # Update profile
```

### **Admin Endpoints**
```
PUT    /api/admin/orders/:id/status  # Update order status
CRUD   /api/admin/menu               # Full menu management
CRUD   /api/admin/schedule           # Location schedule
GET    /api/admin/analytics          # Sales data
```

---

## **7. Performance & Optimization**

### **Loading Strategy**
```
Above-the-fold: Load critical CSS, hero image, CTA buttons
Lazy load: Menu images, map, testimonials
Prefetch: Checkout page after menu interaction
Cache: Menu data (1 hour), locations (5 minutes)
```

### **Target Metrics**
- First Contentful Paint: < 1.5s
- Time to Interactive: < 3s
- Mobile performance score: > 85/100
- Order completion: < 2 minutes

---

## **8. Security & Compliance**

### **Essential Measures**
- PCI DSS compliance for payments
- HTTPS enforcement
- Password hashing (bcrypt)
- SQL injection prevention
- XSS protection
- Rate limiting on API endpoints
- Privacy policy & GDPR compliance

### **Data Protection**
- No sensitive data in logs
- Encryption at rest for PII
- Regular security audits
- Automatic session timeout (admin: 15 minutes)

---

## **9. Deployment & Infrastructure**

### **Production Stack**
- **Hosting**: Vercel/Netlify (frontend), AWS/Heroku (backend)
- **Database**: Managed PostgreSQL (e.g., AWS RDS)
- **File Storage**: AWS S3/Cloudinary
- **CDN**: Cloudflare for static assets
- **Monitoring**: Sentry for errors, LogRocket for sessions

### **Environment Setup**
```
Development â†’ Staging â†’ Production
Feature branches â†’ Pull requests â†’ Automated tests â†’ Deploy
```

---

## **10. Success Metrics & Completion Criteria**

### **Functionality Complete When:**
- [ ] All user flows work without errors
- [ ] Mobile responsive on iOS/Android
- [ ] Payment processing successful
- [ ] Real-time location updates work
- [ ] Admin can manage all aspects
- [ ] Loyalty points accrue and redeem
- [ ] Notifications (SMS/email) functional

### **Performance Complete When:**
- [ ] Page load < 3s on 3G
- [ ] 99% uptime monitoring
- [ ] No critical accessibility issues
- [ ] Cross-browser compatible (Chrome, Safari, Firefox)

---
# **ğŸŒ La Union: Complete App & Website Specification Document**

## **Executive Summary**
A unified digital platform combining website and mobile app to serve as the complete digital presence for La Union PupuserÃ­a y TaquerÃ­a food truck. This specification defines the *complete* system without adding new features beyond what's already conceptualized.

---

## **1. Technology Architecture**

### **Unified Backend System**
```
Frontend Layer:
â”œâ”€â”€ Customer Website (Flutter Web)
â””â”€â”€ Admin Portal (Flutter Web)

Backend Layer:
â”œâ”€â”€ API Gateway (Hosted on Railway)
â”œâ”€â”€ Microservices (if applicable, or monolithic on Railway):
â”‚   â”œâ”€â”€ Order Service
â”‚   â”œâ”€â”€ Menu Service
â”‚   â”œâ”€â”€ Location Service
â”‚   â”œâ”€â”€ Loyalty Service
â”‚   â””â”€â”€ Notification Service
â””â”€â”€ Database Layer:
    â”œâ”€â”€ PostgreSQL (Supabase - primary database)
    â”œâ”€â”€ Supabase Realtime for WebSocket/updates
    â””â”€â”€ Supabase Storage (Images, static assets)
```

### **Third-Party Integrations**
- **Payment**: Stripe/Square (card processing)
- **Maps**: Google Maps API (real-time truck location) or Mapbox
- **SMS/Email**: Twilio + Supabase Edge Functions or Resend
- **Analytics**: Supabase Analytics or PostHog

---

## **2. Complete Feature Specifications**

### **A. Core User Journeys (Defined & Closed)**

#### **Journey 1: First-Time Order**
```
Homepage â†’ Menu â†’ Add Items (with modifiers) â†’ Checkout â†’ 
Guest Checkout or Account Creation â†’ Payment â†’ 
Confirmation + Status Tracking â†’ Post-Order Loyalty Signup
```

#### **Journey 2: Returning Customer**
```
Login â†’ Menu/Favorites â†’ Quick Re-order â†’ Checkout â†’ 
Loyalty Points Applied â†’ Payment â†’ 
Status Tracking â†’ Points Added to Account
```

#### **Journey 3: Truck Locator**
```
Check Schedule â†’ View Map â†’ Set Notifications â†’ 
Navigate to Truck â†’ Show QR Code at Pickup
```

#### **Journey 4: Admin Operations**
```
Login â†’ View Order Queue â†’ Update Status â†’ 
Manage Menu Items â†’ Update Schedule â†’ View Analytics
```

---

## **3. Detailed Component Specifications**

### **A. Homepage (Fully Specified)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hero Section (100vh)                                    â”‚
â”‚ - Background: Parallax video/photo of food preparation  â”‚
â”‚ - Primary CTA: "ORDER NOW" (links to menu)              â”‚
â”‚ - Secondary CTA: "FIND TRUCK" (links to map)           â”‚
â”‚ - Tertiary: "VIEW MENU" (smooth scroll to menu preview) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Location Widget (Fixed Section)                         â”‚
â”‚ - Live map (static view)                                â”‚
â”‚ - Current address & next departure time                 â”‚
â”‚ - "Notify Me" button                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Menu Preview                                            â”‚
â”‚ - 3-4 featured items with "Add to Order" quick buttons  â”‚
â”‚ - "View Full Menu" button                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Loyalty Teaser                                          â”‚
â”‚ - Progress bar showing "X points to next reward"        â”‚
â”‚ - "Join Now" / "Sign In" buttons                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ About Snippet                                           â”‚
â”‚ - 2-3 sentence story + team photo                       â”‚
â”‚ - "Read Our Story" link                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **B. Menu System (Finalized)**
```
Data Structure (Supabase Tables):
{
  category: "Pupusas",
  items: [
    {
      id: "pup-001",
      name: "Revuelta Pupusa",
      description: "Cheese, pork, beans",
      price: 3.50,
      image: "url",
      modifiers: [
        {
          type: "extra",
          name: "Extra Curtido",
          price: 0.50
        }
      ],
      tags: ["spicy", "vegetarian", "gluten-free"],
      available: true
    }
  ]
}

UI Components:
- Sticky category navigation
- Filter chips: Vegetarian, Spicy, GF, etc.
- Search bar with autocomplete
- Item cards with hover effects
- Sticky order summary (mobile: bottom sheet)
```

### **C. Checkout Flow (Complete)**
```
Step 1: Order Review
- Editable item list
- Modifiers displayed
- Subtotal calculation

Step 2: Pickup Selection
- Radio: "ASAP" vs "Schedule"
- Date/Time picker for scheduled
- Estimated ready times

Step 3: Customer Info
- Name
- Phone (for notifications)
- Email (optional, for receipt)

Step 4: Payment
- Card form (Stripe Elements)
- Digital wallet buttons
- Cash toggle
- Loyalty code field

Step 5: Confirmation
- Order number
- QR code for pickup
- Status timeline
- "Track Order" button
```

### **D. Loyalty Program (Full Definition)**
```
Points System:
- $1 spent = 10 points
- 500 points = free drink
- 1000 points = free pupusa/taco
- 1500 points = $10 off
- 2500 points = family meal

Referral Program:
- Both parties get 250 points
- Maximum 5 referrals/month

UI Components:
- Dashboard with points balance
- Progress to next reward
- Transaction history
- Referral link generator
```

### **E. Admin Portal (Feature-Complete)**
```
Modules:
1. Order Management
   - Live queue (Supabase Realtime updates)
   - Status toggles: Received â†’ Preparing â†’ Ready â†’ Completed
   - Filter by status/time
   - Order details modal

2. Menu Management
   - Drag-and-drop categories
   - Item CRUD operations
   - Image upload to Supabase Storage
   - Toggle availability
   - Price updates

3. Schedule Management
   - Weekly calendar view
   - Add/remove locations
   - Set hours
   - Special hours for holidays

4. Analytics Dashboard
   - Daily sales
   - Top items
   - Busiest times
   - Loyalty engagement
   - Export to CSV
```

---

## **4. User Interface Guidelines (Final)**

### **Color Palette (Locked)**
```
Primary:
- Spicy Red: #E63946 (CTAs, alerts)
- Citrus Orange: #F77F00 (accent, highlights)
- Corn Yellow: #FDC500 (discounts, deals)

Neutral:
- Off-white: #F8F8F8 (background)
- Light Grey: #EFEFEF (cards, dividers)
- Charcoal: #333333 (text)

Accent:
- Avocado Green: #2A9D8F (success, loyalty)
```

### **Typography (Final)**
```
Headings: Poppins (600 weight)
- H1: 2.5rem
- H2: 2rem
- H3: 1.5rem

Body: Open Sans (400 weight)
- Primary: 1rem
- Secondary: 0.875rem

Special:
- Menu Items: Poppins (500)
- Prices: Poppins (600)
```

### **Spacing System (8px grid)**
```
Padding/Margin increments:
- xs: 4px
- sm: 8px
- md: 16px
- lg: 24px
- xl: 32px
- xxl: 48px
```

### **Animation Library (Flutter)**
```
- Page transitions: FadeTransition 300ms
- Button hover: ScaleTransition
- Card hover: AnimatedContainer with elevation
- Loading: CircularProgressIndicator with pulse
- Status changes: SlideTransition
```

---

## **5. Data Models (Complete Schema - Supabase)**

### **Core Tables**
```sql
-- Users table (Supabase Auth extends this)
users(id UUID, email TEXT, phone TEXT, name TEXT, created_at TIMESTAMP, loyalty_points INT)

-- Orders table  
orders(id UUID, user_id UUID, status TEXT, total DECIMAL, pickup_time TIMESTAMP, payment_method TEXT, created_at TIMESTAMP)

-- Order items table
order_items(id UUID, order_id UUID, menu_item_id UUID, quantity INT, special_instructions TEXT)

-- Menu items table
menu_items(id UUID, name TEXT, description TEXT, price DECIMAL, category TEXT, image_url TEXT, available BOOLEAN)

-- Truck locations table
truck_locations(id UUID, address TEXT, latitude DECIMAL, longitude DECIMAL, start_time TIME, end_time TIME, day_of_week INT)

-- Loyalty transactions
loyalty_transactions(id UUID, user_id UUID, points INT, type TEXT, order_id UUID, created_at TIMESTAMP)
```

---

## **6. API Structure (Flutter + Railway + Supabase)**

### **Frontend Architecture (Flutter)**
```
- State Management: Riverpod or Bloc
- Routing: GoRouter or AutoRoute
- HTTP Client: Dio or HTTP package
- Local Storage: Hive or SharedPreferences
- Real-time: Supabase Realtime subscription
```

### **Backend Services (Railway)**
```
- Primary Language: Node.js/Express or Python/FastAPI
- Authentication: Supabase Auth integration
- Business Logic: Railway services/workers
- File Processing: Railway volumes + Supabase Storage
- Cron Jobs: Railway cron for cleanup/notifications
```

### **Database & Real-time (Supabase)**
```
- Primary DB: PostgreSQL (managed by Supabase)
- Auth: Supabase Auth with Row Level Security
- Storage: Supabase Storage for images
- Realtime: Supabase Realtime for live updates
- Edge Functions: Supabase Edge Functions for serverless
```

---

## **7. Performance & Optimization**

### **Flutter Web Optimization**
```
- Tree shaking for production builds
- Lazy loading for images
- Code splitting for large bundles
- Precaching of critical assets
- Supabase query optimization with indexes
```

### **Target Metrics**
- First Contentful Paint: < 1.5s
- Time to Interactive: < 3s
- Mobile performance score: > 85/100
- Order completion: < 2 minutes

---

## **8. Security & Compliance**

### **Supabase Security Features**
- Row Level Security (RLS) policies
- Automatic SSL/TLS
- Built-in authentication with OAuth
- Email confirmations and CAPTCHA
- Database backups and point-in-time recovery

### **Additional Measures**
- PCI DSS compliance via Stripe/Square
- HTTPS enforcement
- Rate limiting on Railway endpoints
- Privacy policy & GDPR compliance
- Regular security audits

---

## **9. Deployment & Infrastructure**

### **Production Stack**
- **Frontend Hosting**: Flutter Web build deployed to Railway static hosting or Vercel/Netlify
- **Backend Hosting**: Railway (Node.js/Python services)
- **Database**: Supabase PostgreSQL
- **File Storage**: Supabase Storage
- **CDN**: Supabase CDN for images + Cloudflare
- **Monitoring**: Sentry for errors, Supabase Logs

### **Environment Setup**
```
Development (Local) â†’ Staging (Railway Preview) â†’ Production (Railway)
Feature branches â†’ Pull requests â†’ Automated tests â†’ Deploy to Railway
```

---

## **10. Success Metrics & Completion Criteria**

### **Functionality Complete When:**
- [ ] All user flows work without errors on Flutter Web
- [ ] Responsive design works on all screen sizes
- [ ] Payment processing via Stripe/Square integrated
- [ ] Real-time location updates via Supabase Realtime
- [ ] Admin portal fully functional on Flutter Web
- [ ] Loyalty points accrue and redeem via Supabase functions
- [ ] Notifications (SMS/email) functional via Railway workers

### **Performance Complete When:**
- [ ] Page load < 3s on 3G
- [ ] 99% uptime monitoring via Railway/Supabase
- [ ] No critical accessibility issues
- [ ] Cross-browser compatible (Chrome, Safari, Firefox, Edge)
- [ ] Flutter Web bundle size optimized (< 2MB initial load)

### **Tech Stack Confirmation:**
- âœ… **Frontend**: Flutter (Web)
- âœ… **Backend Hosting**: Railway
- âœ… **Database**: Supabase (PostgreSQL + Auth + Storage + Realtime)
- âœ… **Architecture**: Flutter Web client â†” Railway API services â†” Supabase data layer

Balanced Flutter Structure 
Flutter Web â€“ Customer + Admin
Design goals
	â€¢	Easy to understand
	â€¢	Feature-based (not too many layers)
	â€¢	Scales to mobile later
	â€¢	Works great with Supabase + Railway
	â€¢	No premature abstractions

ğŸ§± Recommended Folder Structure
lib/
â”œâ”€â”€ main.dart
â”œâ”€â”€ app.dart
â”œâ”€â”€ router.dart
â”‚
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ env.dart
â”‚   â”œâ”€â”€ supabase_config.dart
â”‚   â”œâ”€â”€ theme.dart
â”‚   â””â”€â”€ constants.dart
â”‚
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ supabase_service.dart
â”‚   â”œâ”€â”€ api_service.dart
â”‚   â”œâ”€â”€ realtime_service.dart
â”‚   â”œâ”€â”€ payment_service.dart
â”‚   â””â”€â”€ notification_service.dart
â”‚
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ user.dart
â”‚   â”œâ”€â”€ menu_item.dart
â”‚   â”œâ”€â”€ modifier.dart
â”‚   â”œâ”€â”€ order.dart
â”‚   â”œâ”€â”€ order_item.dart
â”‚   â”œâ”€â”€ truck_location.dart
â”‚   â””â”€â”€ loyalty_transaction.dart
â”‚
â”œâ”€â”€ providers/
â”‚   â”œâ”€â”€ auth_provider.dart
â”‚   â”œâ”€â”€ menu_provider.dart
â”‚   â”œâ”€â”€ cart_provider.dart
â”‚   â”œâ”€â”€ order_provider.dart
â”‚   â”œâ”€â”€ location_provider.dart
â”‚   â”œâ”€â”€ loyalty_provider.dart
â”‚   â””â”€â”€ admin_provider.dart
â”‚
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ app_scaffold.dart
â”‚   â”‚   â”œâ”€â”€ admin_scaffold.dart
â”‚   â”‚   â””â”€â”€ responsive_layout.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ shared/
â”‚   â”‚   â”œâ”€â”€ app_button.dart
â”‚   â”‚   â”œâ”€â”€ app_card.dart
â”‚   â”‚   â”œâ”€â”€ loading.dart
â”‚   â”‚   â”œâ”€â”€ error_view.dart
â”‚   â”‚   â””â”€â”€ empty_view.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”‚   â””â”€â”€ home_page.dart
â”‚   â”‚   â”œâ”€â”€ menu/
â”‚   â”‚   â”‚   â”œâ”€â”€ menu_page.dart
â”‚   â”‚   â”‚   â””â”€â”€ item_modal.dart
â”‚   â”‚   â”œâ”€â”€ cart/
â”‚   â”‚   â”‚   â””â”€â”€ cart_page.dart
â”‚   â”‚   â”œâ”€â”€ checkout/
â”‚   â”‚   â”‚   â””â”€â”€ checkout_page.dart
â”‚   â”‚   â”œâ”€â”€ orders/
â”‚   â”‚   â”‚   â”œâ”€â”€ order_status_page.dart
â”‚   â”‚   â”‚   â””â”€â”€ order_history_page.dart
â”‚   â”‚   â”œâ”€â”€ location/
â”‚   â”‚   â”‚   â””â”€â”€ truck_map_page.dart
â”‚   â”‚   â”œâ”€â”€ loyalty/
â”‚   â”‚   â”‚   â””â”€â”€ loyalty_page.dart
â”‚   â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â”‚   â””â”€â”€ profile_page.dart
â”‚   â”‚   â””â”€â”€ admin/
â”‚   â”‚       â”œâ”€â”€ admin_dashboard_page.dart
â”‚   â”‚       â”œâ”€â”€ admin_orders_page.dart
â”‚   â”‚       â”œâ”€â”€ admin_menu_page.dart
â”‚   â”‚       â”œâ”€â”€ admin_schedule_page.dart
â”‚   â”‚       â””â”€â”€ admin_analytics_page.dart
â”‚   â”‚
â”‚   â””â”€â”€ widgets/
â”‚       â”œâ”€â”€ menu_item_card.dart
â”‚       â”œâ”€â”€ order_summary.dart
â”‚       â”œâ”€â”€ location_widget.dart
â”‚       â”œâ”€â”€ loyalty_progress.dart
â”‚       â””â”€â”€ status_timeline.dart
â”‚
â””â”€â”€ utils/
    â”œâ”€â”€ validators.dart
    â”œâ”€â”€ formatters.dart
    â””â”€â”€ debouncer.dart

ğŸ§  Why this structure works
âœ… Not over-engineered
	â€¢	No unnecessary data/domain/usecase layers
	â€¢	No excessive abstraction
	â€¢	Easy to jump into any feature
âœ… Still scalable
	â€¢	Providers handle growth
	â€¢	Services can expand later
	â€¢	Pages are feature-grouped
	â€¢	Admin isolated cleanly
âœ… Web-first but mobile-ready
	â€¢	Responsive layouts
	â€¢	Drawer â†’ Bottom Nav later
	â€¢	Same codebase if you add mobile

ğŸ§­ Routing (Simple & Clean)
/
â”œâ”€â”€ /home
â”œâ”€â”€ /menu
â”œâ”€â”€ /cart
â”œâ”€â”€ /checkout
â”œâ”€â”€ /orders/:id
â”œâ”€â”€ /location
â”œâ”€â”€ /loyalty
â”œâ”€â”€ /profile
â””â”€â”€ /admin
    â”œâ”€â”€ /dashboard
    â”œâ”€â”€ /orders
    â”œâ”€â”€ /menu
    â”œâ”€â”€ /schedule
    â””â”€â”€ /analytics
	â€¢	Use GoRouter
	â€¢	Simple auth checks inside router
	â€¢	Admin pages behind role check

ğŸ” State Management
Riverpod (light usage)
	â€¢	One provider per feature
	â€¢	No nested madness
	â€¢	Easy debugging
Example logic separation:
	â€¢	Providers â†’ state + logic
	â€¢	Services â†’ Supabase / API calls
	â€¢	UI â†’ dumb rendering





